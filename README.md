# Генератор игровых полей головоломки Хэявакэ

Программное средство «Генератор игровых полей головоломки Хэявакэ» предназначено для автоматического формирования игрового поля, проверки логических правил головоломки, отображения результата пользова-телю и сохранения поля в текстовый файл.

## 1) Постановка задачи

Головоломка Хэявакэ представляет собой логическую задачу, решаемую на квадратной сетке. Игровое поле разбито на смежные области произвольной формы, именуемые «комнатами». В некоторых из этих комнат указано число. Цель решающего – определить, какие именно клетки сетки должны быть за-крашены чёрным цветом, соблюдая при этом набор правил:
1. Соответствие количества чёрных клеток в комнате указанному в ней числу; 
2. Запрет на соприкосновение двух чёрных клеток сторонами; 
3. Непрерывная прямая из белых клеток не может пересекать более двух различных комнат.

Для взаимодействия пользователя с программой предусмотрено меню, схема диалога:
<img width="827" height="564" alt="image" src="https://github.com/user-attachments/assets/2b824f63-d4f7-4931-b5fc-0775e583b1c9" />

Структура интерфейса выглядит следующим образом:
1. Для создания новой головоломки необходимо выбрать соответству-ющий пункт меню. В случае успешной генерации на экране отобразится тек-стовое представление поля с видимыми границами комнат и числами внутри них.
2. Имея активное сгенерированное поле, пользователь может по запросу вывести на экран его решение, где будут явно указаны позиции всех чёрных клеток.
3. Пользователь может сохранить текущую головоломку (условие) в текстовый файл для последующего использования вне программы.
4. Операция генерации нового поля может быть выполнена повторно в любой момент, что приведёт к замене текущего активного состояния в памяти программы.
5. Завершение работы осуществляется выбором соответствующей ко-манды выхода.

## 2) Структура проекта

Алгоритмизация и программирование/

├── KR_Heyawake/

│   ├── .gitattributes

│   ├── .gitignore

│   └── error.log

│   └── game_functions.c

│   └── heyawake.h

│   └── main.c

│   └── KR_Heyawake.sln

│   └── KR_Heyawake.vcxproj

│   └── KR_Heyawake.vcxproj.filters

│   └── KR_Heyawake.vcxproj.user

│   └── README.md


## 3) Ключевые функции

### 1. `generate_rooms(game_t* pgame)`
- **Назначение**: Генерирует случайное разбиение двумерного массива room_id на области
- **Параметры**: 
  - `pgame` - указатель на структуру игры
- **Возвращает**: 1 при успехе

### 2. `place_black(game_t* pgame, int* pblacks)`
- **Назначение**: Размещает единичные значения в двумерном массиве fields
- **Параметры**: 
  - `pgame` - указатель на структуру игры
  - `pblacks` -  указатель для возврата количества поставленных чёрных клеток
- **Возвращает**: 1 при успехе, 0 при ошибке

### 3. `black_rule(game_t* pgame, int x, int y)`
- **Назначение**: Проверяет, можно ли поставить единичное значение в позицию (x,y)
- **Параметры**: 
  - `pgame` - указатель на структуру игры
  - `x` - строка
  - `y` - столбец
- **Возвращает**: 1 если можно ставить, 0 если нельзя

### 4. `rooms_rule(game_t* pgame)`
- **Назначение**: Проверяет правило не более двух областей подряд между единичными значениями
- **Параметры**: 
  - `pgame` - указатель на структуру игры
- **Возвращает**: 1 если правило соблюдено, 0 если нарушено

### 5. `generate_game(game_t* pgame, int room_blacks[])`
- **Назначение**: генерация игрового поля
- **Параметры**: 
  - `pgame` - указатель на структуру игры
  - `room_blacks[]` - массив подсчета единичных значений
- **Возвращает**: 1 при успешной генерации, 0 при привышении лимита попыток генерации

### 6. `print_field(game_t* pgame, int room_blacks[], int show_solution)`
- **Назначение**: Вывод поля в консоль
- **Параметры**: 
  - `pgame` - указатель на структуру игры
  - `room_blacks[]` - массив подсчета единичных значений
  - `show_solution` - флаг отображения

### 7. `save_field_to_file(game_t* pgame, int room_blacks[])`
- **Назначение**: Сохранение поля в файл heyawake.txt
- **Параметры**: 
  - `pgame` - указатель на структуру игры
  - `room_blacks[]` - массив подсчета единичных значений
- **Возвращает**: 1 при успешном сохранении, 0 при ошибке

## 4) Контрольные примеры
Сгенерированы 3 поля и проведена проверка соответствия правилам:
<img width="531" height="455" alt="image" src="https://github.com/user-attachments/assets/20e0a285-421b-4eae-953b-66d928010d79" />

<b>Результаты проверки:</b>

| Правило                                          | Поле 1     | Поле 2     | Поле 3     |
|:-------------------------------------------------|:----------:|:----------:|:----------:|
| Нет пересечения белых клеток более чем через 2 комнаты | Выполнено  | Выполнено  | Выполнено  |
| Черные клетки не находятся по соседству          | Выполнено  | Выполнено  | Выполнено  |

## 5) Формат данных

- <b>Поле:</b> Двумерный массив 6×6 (int field[N][N])

  - 0 — белая клетка

  - 1 — черная клетка

- <b>Комнаты:</b> Двумерный массив 6×6 (int room_id[N][N])

  - ID от 0 до 8 для 9 комнат

- <b>Черные по комнатам:</b> Массив из 9 элементов

  - Количество черных клеток в каждой комнате
